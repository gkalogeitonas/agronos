# Εγγραφή και Αυθεντικοποίηση Συσκευών στην Πλατφόρμα Agronos: Ασφάλεια και Κλιμάκωση στο IoT

## Εισαγωγή

Με τη ραγδαία ενσωμάτωση του IoT στη γεωργία, η ασφαλής εγγραφή και αυθεντικοποίηση των συσκευών αποτελεί κρίσιμο πυλώνα για πλατφόρμες όπως το Agronos. Η διαδικασία αυτή εξασφαλίζει ότι μόνο έγκυρες συσκευές (αισθητήρες και ενεργοποιητές) συμμετέχουν στο δίκτυο επικοινωνίας, αποτρέποντας μη εξουσιοδοτημένη πρόσβαση και διασφαλίζοντας την ακεραιότητα των δεδομένων.

## Σημασία της Ασφαλούς Εγγραφής και Αυθεντικοποίησης

* **Αποτροπή μη εξουσιοδοτημένης πρόσβασης:** Βεβαιώνει ότι κάθε συσκευή είναι ταυτοποιημένη πριν επικοινωνήσει με το σύστημα.
* **Διασφάλιση ακεραιότητας δεδομένων:** Μόνο αξιόπιστες πηγές συλλέγουν και στέλνουν δεδομένα.
* **Αξιοπιστία λειτουργίας:** Αποφεύγονται επιθέσεις και διακοπές λειτουργίας λόγω κακόβουλων συσκευών.

## Διαδικασία Εγγραφής και Αυθεντικοποίησης: Πώς λειτουργεί βήμα-βήμα

1. **Αρχικοποίηση Συσκευής και QR Code**

    Κάθε συσκευή συνοδεύεται από ένα μοναδικό QR code που περιέχει:
    - Ένα μοναδικό αναγνωριστικό (UUID)
    - Ένα μυστικό (secret), που δημιουργείται στη φάση παραγωγής

2. **Εγγραφή από τον Χρήστη μέσω της Εφαρμογής**

    Ο χρήστης σκανάρει το QR code μέσω του web interface του Agronos.

    Τα στοιχεία (UUID και secret) στέλνονται στο backend, το οποίο ελέγχει τη μοναδικότητα και εγκυρότητά τους και συσχετίζει τη συσκευή με τον λογαριασμό του χρήστη και το αγρόκτημα.



> *Η χρήση QR code ως out-of-band (OOB) κανάλι μεταφοράς μυστικού υλικού είναι διεθνώς αναγνωρισμένη ως ιδιαίτερα ασφαλής για την αρχικοποίηση pairing IoT συσκευών* \[1]\[2].    

3. **Πρώτη Επικοινωνία Συσκευής με το Backend και Έκδοση Token**

    Η συσκευή, μετά την εγγραφή, κάνει το πρώτο της αίτημα στο backend (π.χ. `POST /api/device/register`) στέλνοντας το UUID και το secret που διαθέτει.

    Εάν τα στοιχεία είναι σωστά, το backend εκδίδει και επιστρέφει ένα μοναδικό authentication token για τη συσκευή (συνήθως ως JWT ή παρόμοιο).

    Η συσκευή αποθηκεύει αυτό το token στη μνήμη της για μελλοντική χρήση.

4. **Μελλοντικές Επικοινωνίες – Αυθεντικοποίηση με Token**

    Για κάθε επόμενο αίτημα (είτε αποστολή μετρήσεων είτε ενημέρωση κατάστασης), η συσκευή χρησιμοποιεί το token ως bearer header (π.χ. `Authorization: Bearer <device-token>`) ή ως credentials στο MQTT.

    Το backend επαληθεύει το token και επιτρέπει ή απορρίπτει την επικοινωνία.




### Μέτρα Ασφαλείας:

* **HTTPS/TLS** σε όλα τα endpoints.
* **Περιορισμός ρυθμού (rate limiting)** για αποτροπή επιθέσεων DDoS.
* **Topic-based access control** στο MQTT broker.

## Τι προτείνει η διεθνής βιβλιογραφία

* **QR code pairing:** Η χρήση QR code για out-of-band μεταφορά κλειδιών, hash ή μυστικού αναγνωρίζεται ως ασφαλής και φιλική προς τον χρήστη \[1].
* **Συμμετρική Κρυπτογράφηση & Tokens:** Ελαφριές (lightweight) συμμετρικές τεχνικές αυθεντικοποίησης προτείνονται για IoT με περιορισμένους πόρους \[2].
* **Hardware-based methods (PUFs):** Προσφέρουν ακόμη μεγαλύτερη ασφάλεια, αν και δεν αποτελούν απαραίτητη προϋπόθεση για την αρχική υλοποίηση \[2].

## Υλοποίηση στο Agronos

* **Εγγραφή με QR code (UUID + secret):** Διασφαλίζει την αρχική ταυτοποίηση της συσκευής.
* **Token-based authentication:** Για όλη την επόμενη επικοινωνία.
* **Υποστήριξη HTTP & MQTT:** Για ευελιξία συνδεσιμότητας.
* **Κλιμάκωση και ασφάλεια:** Όλες οι πρακτικές διασφαλίζουν ασφάλεια, αξιοπιστία και εύκολη διαχείριση μεγάλης κλίμακας.

## Συμπέρασμα

Η επιτυχής και ασφαλής εγγραφή/αυθεντικοποίηση συσκευών αποτελεί βασικό συστατικό για μια αξιόπιστη πλατφόρμα IoT όπως το Agronos. Η αξιοποίηση QR code pairing και η χρήση tokens εγγυώνται κλιμάκωση, προστασία και ευχρηστία, εναρμονιζόμενες πλήρως με τις σύγχρονες τάσεις της βιβλιογραφίας.

---

## Βιβλιογραφία

1. **Survey and Systematization of Secure Device Pairing** (IEEE Communications Surveys & Tutorials, 2018)
2. **A Survey of Internet of Things (IoT) Authentication Schemes** (Sensors, 2019)

